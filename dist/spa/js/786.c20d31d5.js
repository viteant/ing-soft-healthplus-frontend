"use strict";(globalThis["webpackChunkhealtplus"]=globalThis["webpackChunkhealtplus"]||[]).push([[786],{6388:(e,l,a)=>{a.d(l,{Z:()=>o});const o={required:e=>!!e||"Este campo es requerido"}},6786:(e,l,a)=>{a.r(l),a.d(l,{default:()=>X});var o=a(9835),t=a(499),i=a(6970);const n=[{name:"fullname",label:"Nombre",field:e=>{var l;return null===(l=e.user)||void 0===l?void 0:l.fullname},align:"left",sortable:!0},{name:"user_email",label:"Email",field:e=>{var l;return null===(l=e.user)||void 0===l?void 0:l.email},align:"left",sortable:!0},{name:"specialism",label:"Especialidad",align:"left",field:"specialism",sortable:!0},{name:"degree",label:"Título",align:"left",field:"degree",sortable:!0},{name:"service_price",label:"Precio de Consulta",field:"service_price",align:"left",format:e=>`$ ${parseFloat(e+"").toFixed(2)}`,sortable:!1},{name:"actions",label:"Acciones",sortable:!1}];var s=a(6388),u=a(9302),r=a(4136),d=function(e,l,a,o){function t(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,i){function n(e){try{u(o.next(e))}catch(l){i(l)}}function s(e){try{u(o["throw"](e))}catch(l){i(l)}}function u(e){e.done?a(e.value):t(e.value).then(n,s)}u((o=o.apply(e,l||[])).next())}))};const c=["Médico","Master","Doctor"],m=["Medicina General","Ginecología","Obstetricia","Nutrición","Psicología","Pediatría"],p=(0,t.iH)([]),v=e=>d(void 0,void 0,void 0,(function*(){return yield e.id?r.api.put(`user/administrative/${null===e||void 0===e?void 0:e.id}`,e):r.api.post("user/doctor",e)})),f=()=>d(void 0,void 0,void 0,(function*(){return yield r.api.get("user/doctor").then((e=>p.value=e.data))})),w=e=>d(void 0,void 0,void 0,(function*(){return yield r.api.delete(`user/doctor/${e}`)})),g=()=>({doctors:p,degree:c,specialism:m,storeData:v,syncDatabaseData:f,destroyData:w}),_=(0,o._)("div",{class:"text-h6"},"Doctor",-1),b={class:"row q-pb-lg"},q={class:"column col-12 col-md-6 q-px-sm"},y={class:"column col-12 col-md-6 q-px-sm"},W={class:"column col-12 col-md-6 q-px-sm"},Z={class:"column col-12 col-md-6 q-px-sm"},k={class:"column col-12 q-px-sm q-mt-md"},h=(0,o.aZ)({__name:"DoctorForm",props:{data:{type:Object,required:!1}},emits:["onOk","onCancel"],setup(e,{emit:l}){var a;const i=e,n=(0,t.iH)(null!==(a=i.data)&&void 0!==a?a:{user:{}}),r=(0,t.iH)(null),{storeData:d,specialism:c,degree:m}=g(),p=(0,u.Z)(),v=()=>l("onCancel"),f=()=>{r.value.validate().then((e=>{e&&(p.loading.show(),d(n.value).then((e=>{p.notify({type:"positive",position:"top",message:e.data.message}),l("onOk")})).catch((e=>{var l,a,o;p.notify({type:"negative",position:"top",message:null!==(a=null===(l=e.response.data)||void 0===l?void 0:l.error)&&void 0!==a?a:null===(o=e.response.data)||void 0===o?void 0:o.message})})).finally((()=>p.loading.hide())))}))};return(e,l)=>{const a=(0,o.up)("q-card-section"),i=(0,o.up)("q-separator"),u=(0,o.up)("q-input"),d=(0,o.up)("q-select"),p=(0,o.up)("q-form"),w=(0,o.up)("q-btn"),g=(0,o.up)("q-space"),h=(0,o.up)("q-card-actions"),Q=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(Q,{class:"my-card",style:{width:"800px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[_])),_:1}),(0,o.Wm)(i),(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{ref_key:"form",ref:r},{default:(0,o.w5)((()=>[(0,o._)("div",b,[(0,o._)("div",q,[(0,o.Wm)(u,{type:"text",modelValue:n.value.user.fullname,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value.user.fullname=e),readonly:!!n.value.user_id,rules:[(0,t.SU)(s.Z).required],label:"Nombre"},null,8,["modelValue","readonly","rules"])]),(0,o._)("div",y,[(0,o.Wm)(u,{type:"email",modelValue:n.value.user.email,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value.user.email=e),readonly:!!n.value.user_id,rules:[(0,t.SU)(s.Z).required],label:"Email"},null,8,["modelValue","readonly","rules"])]),(0,o._)("div",W,[(0,o.Wm)(d,{options:(0,t.SU)(c),modelValue:n.value.specialism,"onUpdate:modelValue":l[2]||(l[2]=e=>n.value.specialism=e),label:"Especialidad"},null,8,["options","modelValue"])]),(0,o._)("div",Z,[(0,o.Wm)(d,{options:(0,t.SU)(m),modelValue:n.value.degree,"onUpdate:modelValue":l[3]||(l[3]=e=>n.value.degree=e),label:"Grado"},null,8,["options","modelValue"])]),(0,o._)("div",k,[(0,o.Wm)(u,{type:"number",modelValue:n.value.service_price,"onUpdate:modelValue":l[4]||(l[4]=e=>n.value.service_price=e),label:"Precio de Consulta"},null,8,["modelValue"])])])])),_:1},512)])),_:1}),(0,o.Wm)(i),(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w,{flat:"",color:"negative",onClick:l[5]||(l[5]=e=>v())},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancelar ")])),_:1}),(0,o.Wm)(g),(0,o.Wm)(w,{flat:"",color:"positive",onClick:l[6]||(l[6]=e=>f())},{default:(0,o.w5)((()=>[(0,o.Uk)(" Aceptar ")])),_:1})])),_:1})])),_:1})}}});var Q=a(4458),C=a(3190),V=a(2218),U=a(8326),x=a(1852),D=a(7887),S=a(1821),H=a(4455),O=a(136),P=a(9984),T=a.n(P);const E=h,z=E;T()(h,"components",{QCard:Q.Z,QCardSection:C.Z,QSeparator:V.Z,QForm:U.Z,QInput:x.Z,QSelect:D.Z,QCardActions:S.Z,QBtn:H.Z,QSpace:O.Z});const I=(0,o.aZ)({__name:"DoctorPage",setup(e){const{syncDatabaseData:l,destroyData:a,doctors:s}=g(),r=(0,t.iH)(!1),d=(0,t.iH)(null),c=(0,t.iH)(null),m=(0,t.iH)(null),p=(0,u.Z)(),v=e=>{c.value=e,r.value=!0},f=({id:e})=>{e&&p.dialog({title:"Confirm",message:"¿Deseas eliminar este registro?",class:"bg-negative",dark:!0,cancel:!0,persistent:!0}).onOk((()=>{p.loading.show(),a(e).then((e=>{l(),p.notify({message:e.data.message,type:"positive",position:"top"})})).catch((e=>{var l,a,o;p.notify({message:null!==(a=null===(l=e.response.data)||void 0===l?void 0:l.error)&&void 0!==a?a:null===(o=e.response.data)||void 0===o?void 0:o.message,type:"positive",position:"top"})})).finally((()=>p.loading.hide()))}))},w=()=>{r.value=!1,l()},_=()=>{r.value=!1};return l(),(e,a)=>{const u=(0,o.up)("q-toolbar-title"),p=(0,o.up)("q-toolbar"),g=(0,o.up)("q-input"),b=(0,o.up)("q-space"),q=(0,o.up)("q-icon"),y=(0,o.up)("q-btn"),W=(0,o.up)("q-item-section"),Z=(0,o.up)("q-item"),k=(0,o.up)("q-list"),h=(0,o.up)("q-menu"),Q=(0,o.up)("q-td"),C=(0,o.up)("q-table"),V=(0,o.up)("q-card"),U=(0,o.up)("q-page"),x=(0,o.up)("q-dialog"),D=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(U,{class:"q-pa-lg"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:"container-card"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{ref_key:"table",ref:d,flat:"",title:"Doctores",rows:(0,t.SU)(s),columns:(0,t.SU)(n),"row-key":"name",filter:m.value},{top:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"q-px-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>{var e;return[(0,o.Uk)((0,i.zw)(null===(e=d.value)||void 0===e?void 0:e.title),1)]})),_:1})])),_:1}),(0,o.Wm)(p,{class:"q-px-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"Buscar",modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),style:{width:"300px"}},null,8,["modelValue"]),(0,o.Wm)(b),(0,o.Wm)(y,{outline:"",color:"positive",onClick:a[1]||(a[1]=e=>r.value=!0)},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{size:"xs",name:"fas fa-plus",class:"q-pr-sm"}),(0,o.Uk)(" Agregar Doctor ")])),_:1})])),_:1})])),"body-cell-actions":(0,o.w5)((e=>[(0,o.Wm)(Q,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{icon:"fas fa-ellipsis-vertical",flat:"",size:"xs"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,{dense:"",style:{"min-width":"150px"}},{default:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.j4)(Z,{clickable:"",onClick:l=>v(e.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{name:"fas fa-edit",size:"15px"})])),_:1}),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Editar")])),_:1})])),_:2},1032,["onClick"])),[[D]]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(Z,{clickable:"",onClick:l=>f(e.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{name:"fas fa-trash",size:"15px"})])),_:1}),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Eliminar")])),_:1})])),_:2},1032,["onClick"])),[[D]])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])),_:1})])),_:1}),(0,o.Wm)(x,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=e=>r.value=e),onHide:a[3]||(a[3]=e=>(0,t.SU)(l)())},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{data:c.value,onOnOk:w,onOnCancel:_},null,8,["data"])])),_:1},8,["modelValue"])],64)}}});var j=a(9885),A=a(7580),F=a(1663),M=a(1973),$=a(2857),B=a(7220),G=a(5290),N=a(3246),L=a(490),Y=a(1233),J=a(2074),K=a(2146);const R=I,X=R;T()(I,"components",{QPage:j.Z,QCard:Q.Z,QTable:A.Z,QToolbar:F.Z,QToolbarTitle:M.Z,QInput:x.Z,QSpace:O.Z,QBtn:H.Z,QIcon:$.Z,QTd:B.Z,QMenu:G.Z,QList:N.Z,QItem:L.Z,QItemSection:Y.Z,QDialog:J.Z}),T()(I,"directives",{ClosePopup:K.Z})}}]);